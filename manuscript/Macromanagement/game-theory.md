## 4.2 Теория игр

В теории игр есть несколько концепций, которые хорошо работают в League of Legends. Опытные игроки интуитивно приходят к ним сами. Они замечают, что некоторые типичные решения и ловушки часто срабатывают против оппонентов. Тогда игроки запоминают их как шаблон и применяют в подходящих ситуациях. Теория игр объясняет эффективность таких приёмов.

### 4.2.1 Математическое ожидание

// TODO: Сначала должен идти раздел про мат ожидание, потому что эта концепция проще.

// TODO: Координационные игры пользуются концепцией мат ожидания - оценка выигрышей.

### 4.2.2 Координационная игра

#### 4.2.2.1 Определение

В League of Legends качественная работа с информацией даёт игроку большое преимущество. Он вероятнее примет хорошее решение, когда местоположение и планы противника известны. В противном случае игрок действует наугад. Это увеличивает вероятность принять плохое решение. Действия в условиях неопределённости хорошо описывает концепция координационной игры.

В [**координационной игре**](https://en.wikipedia.org/wiki/Coordination_game) (сoordination game) участники делают свой ход одновременно. Они не знают заранее о планах и действиях друг друга. Как правило действие — это выбор из небольшого количества вариантов. Выигрыши сторон зависят от совпадения или несовпадения выбранного действия. Пример координационной игры — "камень, ножницы, бумага".

**Решение игры** — это оптимальная (наилучшая) стратегия для её участника. Теория предлагает **смешанную стратегию** в качестве универсального решения для любой координационной игры. Эта стратегия заключается в том, что участник выбирает действие случайно, согласно рассчитанной пропорции.

Рассмотрим упрощённый пример. Допустим, что в координационной игре участнику доступны два действия A и B. Он рассчитал, что действие A будет успешным в 60% случаев, а B — в 40%. Участник не может всегда выбирать действие A, потому что противник это заметит. Тогда успешность действия A уменьшится. Решением игры для участника будет смешанная стратегия: выбирать действие A с вероятностью 60% и действие B с вероятностью 40%.

У смешанных стратегий есть две проблемы:

1. Оценить успешность разных действий и рассчитать их оптимальные пропорции для смешанной стратегии может быть сложно. Для этого нужна статистика по прошлым играм.

2. Человек не способен самостоятельно генерировать длинную последовательность случайных чисел.

Из-за этих проблем координационные игры оказываются очень сложными на практике. Их участники часто ошибаются и действуют неоптимально.

I> Если вам интересно узнать больше о теории игр, читайте первую главу моей книги ["Искусственный интеллект в стратегических играх"](http://leanpub.com/ai-in-strategy-games).

#### 4.2.2.2 Пример игровой ситуации

Мы познакомились с приёмами управления волной миньонов. В качестве примера координационной игры рассмотрим типичную игровую ситуацию на верхней линии.

Пусть игрок синей команды сделал freeze на своей стороне. Для простоты предположим, что у него и противника есть только два варианта действий: оставаться на линии или сделать recall. Таблица 4-4 демонстрирует примерные выигрыши сторон.

{caption: "Таблица 4-4. Выигрыши от recall во время freeze игрока", width: "100%"}
![Выигрыши от recall](images/Macromanagement/coordination-game-recall.png)

Столбцы таблицы соответствуют действию противника. Строки соответствуют аналогичному действию игрока. Каждая ячейка таблицы содержит два числа. Первое — это оценка результата с точки зрения игрока, а второе — с точки зрения противника. Оценки имеют следующие значения:

* 0 — плохой результат
* 1 — средний результат
* 2 — хороший результат.

Рассмотрим каждую комбинацию действий участников:

1.  **Оба участника делают recall**. В этом случае оппонент немного улучшает своё положение. Он отсутствует на линии какое-то время, поэтому его не сможет атаковать лесник игрока. При этом противник платит за отсутствие минимальную цену. Выигрыши сторон в этом случае 2 на 1 в пользу игрока.

2. **Игрок делает recall, а противник — нет**. За это игрок теряет freeze и получает креш миньонов в свою башню. Поэтому выигрыши составляют 0 на 2 в пользу противника.

3. **Противник делает recall, а игрок — нет**. Тогда оппонент возвращается на линию с преимуществом. С другой стороны, игрок сохраняет свой freeze. Поэтому выигрыш составляет 1 на 2 в пользу противника.

4. **Оба участника остаются на линии**. В этом случае выигрыши составляют 2 на 0 в пользу игрока. Причина в том, что freeze — сильный приём, который вынуждает противника находиться в опасной зоне и рисковать.

Численные значения выигрышей даны для примера. На самом деле они зависят от конкретной игровой ситуации: пассивное золото у обоих участников, матчап, минута игры, позиция лесника и т.д.

I> **Пассивное золото** (passive gold) — это золото в рюкзаке чемпиона, которое он ещё не потратил на покупку предметов. **Активное золото** (active gold) — это золото, которое чемпион уже потратил на покупку предметов.

Из таблицы 4-2 можно сделать следующий вывод:

> Противник получит преимущество, если игрок не повторит его действие.

Другими словами, выполнив freeze, игрок хочет делать то же самое, что делает его оппонент. Оппонент наоборот хочет запутать игрока и выбрать противоположное действие.

Рассмотрим, как будет проходить эта координационная игра. До тех пор, пока противник находится в зоне видимости, игрок знает наверняка: остаётся он на линии или сделал recall. Исходя из этой информации, игрок выбирает то же самое действие. По сути, в такой ситуации нет никакой координационной игры — участники знают о действиях друг друга.

Теперь предположим, что оппонент вышел из зоны видимости игрока. Так он **скрыл информацию** о себе. Это очень сильное действие по следующим причинам:

1. Лесник игрока не видит его оппонента на линии. Поэтому он не устроит ганг — есть вероятность, что цель уже сделала recall.

2. Начинается координационная игра, в которой игрок должен угадать действие оппонента. В случае его ошибки, противник получит преимущество.

3. Союзник игрока на соседней линии вынужден быть осторожным. Если противника нет на карте, он может готовить ганг.

В результате игрок оказался в сложной ситуации. Он должен выбрать одно из двух: оставаться на линии или делать recall. В случае ошибки противник разбивает freeze, делает креш и получает преимущество. Рассмотрим, есть ли у игрока другие варианты.

I> В League of Legends есть механики, которые дают право на ошибку в рассмотренной координационной игре. Например, заклинание призывателя телепорт. Игрок может сделать recall по ошибке, когда его оппонент остался на линии. Тогда он применяет телепорт и быстро возвращается обратно.

#### 4.2.2.3 Решение координационной игры

>>>

{pagebreak}
