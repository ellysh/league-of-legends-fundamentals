## 4.2 Теория игр

В теории игр есть несколько концепций, которые хорошо работают в League of Legends. Опытные игроки интуитивно приходят к ним сами. Они замечают, что некоторые типичные решения и ловушки часто срабатывают против оппонентов. Тогда игроки запоминают их как шаблон и применяют в подходящих ситуациях. Теория игр объясняет эффективность таких приёмов.

### 4.2.1 Математическое ожидание

// TODO: Сначала должен идти раздел про мат ожидание, потому что эта концепция проще.

// TODO: Координационные игры пользуются концепцией мат ожидания - оценка выигрышей.

### 4.2.2 Координационная игра

#### 4.2.2.1 Определение

В League of Legends качественная работа с информацией даёт игроку большое преимущество. Он вероятнее примет хорошее решение, когда местоположение и планы противника известны. В противном случае игрок действует наугад. Это увеличивает вероятность принять плохое решение. Действия в условиях неопределённости хорошо описывает концепция координационной игры.

В [**координационной игре**](https://en.wikipedia.org/wiki/Coordination_game) (сoordination game) участники делают свой ход одновременно. Они не знают заранее о планах и действиях друг друга. Как правило действие — это выбор из небольшого количества вариантов. Выигрыши сторон зависят от совпадения или несовпадения выбранного действия. Пример координационной игры — "камень, ножницы, бумага".

**Решение игры** — это оптимальная (наилучшая) стратегия для её участника. Теория предлагает **смешанную стратегию** в качестве универсального решения для любой координационной игры. Эта стратегия заключается в том, что участник выбирает действие случайно, согласно рассчитанной пропорции.

Рассмотрим упрощённый пример. Допустим, что в координационной игре участнику доступны два действия A и B. Он рассчитал, что действие A будет успешным в 60% случаев, а B — в 40%. Участник не может всегда выбирать действие A, потому что противник это заметит. Тогда успешность действия A уменьшится. Решением игры для участника будет смешанная стратегия: выбирать действие A с вероятностью 60% и действие B с вероятностью 40%.

У смешанных стратегий есть две проблемы:

1. Оценить успешность разных действий и рассчитать их оптимальные пропорции для смешанной стратегии может быть сложно. Для этого нужна статистика по прошлым играм.

2. Человек не способен самостоятельно генерировать длинную последовательность случайных чисел.

Из-за этих проблем координационные игры оказываются очень сложными на практике. Их участники часто ошибаются и действуют неоптимально.

I> Если вам интересно узнать больше о теории игр, читайте первую главу моей книги ["Искусственный интеллект в стратегических играх"](http://leanpub.com/ai-in-strategy-games).

#### 4.2.2.2 Пример игровой ситуации

Мы познакомились с приёмами управления волной миньонов. В качестве примера координационной игры рассмотрим типичную игровую ситуацию на верхней линии.

Пусть игрок синей команды сделал freeze на своей стороне. Для простоты предположим, что у него и противника есть только два варианта действий: оставаться на линии или сделать recall. Таблица 4-4 демонстрирует примерные выигрыши сторон.

{caption: "Таблица 4-4. Выигрыши от recall во время freeze игрока", width: "100%"}
![Выигрыши от recall](images/Macromanagement/coordination-game-recall.png)

Столбцы таблицы соответствуют действию противника. Строки соответствуют аналогичному действию игрока. Каждая ячейка таблицы содержит два числа. Первое — это оценка результата с точки зрения игрока, а второе — с точки зрения противника. Оценки имеют следующие значения:

* 0 — плохой результат
* 1 — средний результат
* 2 — хороший результат.

Рассмотрим каждую комбинацию действий участников:

1.  **Оба участника делают recall**. В этом случае оппонент немного улучшает своё положение. Он отсутствует на линии какое-то время, поэтому его не сможет атаковать лесник игрока. При этом противник платит за отсутствие минимальную цену. Выигрыши сторон в этом случае 2 на 1 в пользу игрока.

2. **Игрок делает recall, а противник — нет**. За это игрок теряет freeze и получает креш миньонов в свою башню. Поэтому выигрыши составляют 0 на 2 в пользу противника.

3. **Противник делает recall, а игрок — нет**. Тогда оппонент возвращается на линию с преимуществом. С другой стороны, игрок сохраняет свой freeze. Поэтому выигрыш составляет 1 на 2 в пользу противника.

4. **Оба участника остаются на линии**. В этом случае выигрыши составляют 2 на 0 в пользу игрока. Причина в том, что freeze — сильный приём, который вынуждает противника находиться в опасной зоне и рисковать.

Численные значения выигрышей даны для примера. На самом деле они зависят от конкретной игровой ситуации: пассивное золото у обоих участников, матчап, минута игры, позиция лесника и т.д. Чем дольше игрок и его оппонент находились на линии без recall, тем выше ставки в координационной игре. Тот кто сделает recall, получит большое преимущество по предметам. Тот кто останется на линии, окажется очень слабым.

I> **Пассивное золото** (passive gold) — это золото в рюкзаке чемпиона, которое он ещё не потратил на покупку предметов. **Активное золото** (active gold) — это золото, которое чемпион уже потратил на покупку предметов.

Из таблицы 4-2 можно сделать следующий вывод:

> Противник получит преимущество, если игрок не повторит его действие.

Другими словами, после freeze игрок хочет делать то же самое, что делает его оппонент. Оппонент наоборот хочет запутать игрока и выбрать противоположное действие.

Рассмотрим, как будет проходить эта координационная игра. До тех пор, пока противник находится в зоне видимости, игрок знает наверняка: остаётся он на линии или сделал recall. Исходя из этой информации, игрок выбирает то же самое действие. По сути, в такой ситуации нет никакой координационной игры — участники знают о действиях друг друга.

Теперь предположим, что оппонент вышел из зоны видимости игрока. Так он **скрыл информацию** о себе. Это очень сильное действие по следующим причинам:

1. Лесник игрока не видит его оппонента на линии. Поэтому он не устроит ганг — есть вероятность, что цель уже сделала recall.

2. Начинается координационная игра, в которой игрок должен угадать действие оппонента. В случае его ошибки, противник получит преимущество.

3. Союзник игрока на соседней линии вынужден быть осторожным. Если противника нет на карте, он может готовить ганг.

В результате игрок оказался в сложной ситуации. Он должен выбрать одно из двух: оставаться на линии или делать recall. В случае ошибки противник разбивает freeze, делает креш и получает преимущество. Рассмотрим, есть ли у игрока другие варианты.

I> В League of Legends есть механики, которые дают право на ошибку в рассмотренной координационной игре. Например, заклинание призывателя телепорт. Игрок может сделать recall по ошибке, когда его оппонент остался на линии. Тогда он применит телепорт и быстро вернётся обратно.

#### 4.2.2.3 Решение координационной игры

Противник навязал координационную игру. Вероятность игрока сделать в ней правильный выбор составляет 50%. Это очень плохая перспектива после того, как он качественно исполнил приём freeze и отзонил оппонента. С другой стороны, противник видит игрока и его действие. Поэтому ему не нужно угадывать. Из-за этого координационная игра в сложившейся ситуации очень не выгодна игроку.

Работа с информацией позволит игроку отказаться от координационной игры. Эта работа подразумевает два действия:

1. **Сокрытие информации о себе**.

2. **Разведка информации о противнике**.

Сокрытие информации означает выйти из зоны видимости противников и снять вражеские варды.

I> Один из сильных приёмов для сокрытия информации называется **fake recall** (фальшивый recall). Его демонстрирует [следующе видео](https://www.reddit.com/r/leagueoflegends/comments/gq73v5/a_classic_fake_recall_strat/). Идея заключается в том, чтобы начать анимацию recall в области видимости противника. В последний момент анимацию надо прервать и выйти из области видимости. Тогда противник может ошибочно решить, что recall завершился и игрок вернулся на базу.

Разведка в большинстве случаев — это установка вардов на карте и facecheck. Кроме этого у некоторых чемпионов есть инструменты для разведки (например, умение Ashe E).

I> **Facecheck** (проверка лицом) означает зайти в кусты или другую область карты, в которой нет видимости. Это опасный приём, потому что враг может устроить засаду в этой области.

Игрок может увеличить свои шансы на победу в координационно игре следующими способами:

1. **Скрыть информацию о себе** — выйти из зоны видимости противника. Для этого надо либо зайти в кусты, либо отойти от вражеской волны на дистанцию больше 1200.

2. **Разведать информацию о противнике** — поставить вард в ближайший куст или проверить его facecheck.

Если игрок успешно скроет информацию о себе, противник тоже будет вынужден угадывать. Это сравняет шансы на победу: каждая сторона может ошибиться с вероятностью 50%.

Если игрок разведает информацию, ему больше не нужно угадывать. Он наверняка знает: остаётся противник на линии или нет.

Обратите внимание, что и сокрытие информации, и разведка могут закончиться неудачей. Например, игрок вышел из зоны видимости вражеских миньонов, но оказался на вражеском варде. Тогда скрыть информацию ему не удалось. Другой пример, игрок проверил ближайший куст, но противник скрывался в следующем. Тогда разведка даст ложную информацию. Воспользовавшись ей, игрок допустит ошибку. Именно эти проблемы делают координационные игры такими сложными на практике.

Рассмотрим, какие варианты по сокрытию информации и разведке есть у игроков на верхней линии. Допустим, что игрок красной команды делает freeze на своей стороне. Иллюстрация 4-8 демонстрирует позиции игрока синей команды, которые позволят ему скрыть информацию о себе.

{caption: "Иллюстрация 4-8. Позиции для сокрытия информации", width: "100%"}
![Позиции для сокрытия информации](images/Macromanagement/positions-to-hide-information.png)

Синий и красный прямоугольники обозначают фронт столкновения миньонов. Зелёные точки — это позиции, в которых синий игрок может выйти из вражеской области видимости.

Игрок красной команды может получить видимость в зелёных точках с помощью вардов. Но количество вардов ограничено и все позиции ими не покрыть. Поэтому разведка часто превращается в отдельную координационную игру: угадать, в каком месте будет скрываться противник.

I> В League of Legends есть механики, которые облегчают разведку. Например, когда игрок делает телепорт на какую-то точку, это видно через туман войны. Поэтому опытные игроки после recall всегда смотрят на вражескую башню и миньонов. Так они заранее замечают телепорт от противника.

Мы рассмотрели пример одной координационной игры. В реальной партии множество аналогичных игр идут параллельно: на каждой линии и в лесу. В некоторых из них участвуют только два игрока, а в некоторых — все десять. Часто результат координационной игры определяет исход партии. Поэтому очень важно вовремя её распознать. Этот навык развивается только с опытом.

Когда противник получает преимущество, у игрока почти всегда есть опция навязать координационную игру и взять реванш. Именно так действуют сильные игроки. Они качественно работают с информацией и действуют наверняка. С другой стороны, новичкам обычно недостаёт знаний и навыков. Поэтому они часто действую наугад и ошибаются. В этом одно из главных отличий между игроками низкого и высокого ранга.

{pagebreak}
